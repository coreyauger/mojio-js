// Generated by CoffeeScript 1.6.3
(function() {
    var App, MojioClient, config, mojio_client;

    MojioClient = this.MojioClient;

    App = this.App;

    config = {
        application: '9ea750d2-7085-4125-bcd8-5e6d05d1d695',
        secret: 'e464f45a-e877-4655-b119-f7c58c10549f',
        hostname: 'develop.api.moj.io',
        version: 'v1',
        port: '80'
    };

    mojio_client = new MojioClient(config);

    $(function() {
        var appChangedCallback;
        appChangedCallback = function(entity) {
            var div;
            div = document.getElementById('result6');
            div.innerHTML += 'Observed /App <br>';
            return div.innerHTML += JSON.stringify(entity);
        };
        return mojio_client.login('anonymous@moj.io', 'Password007', function(error, result) {
            var app, div;
            if (error) {
                return alert("Login Error:" + error);
            } else {
                div = document.getElementById('result');
                div.innerHTML += 'POST /login<br>';
                div.innerHTML += JSON.stringify(result);
                mojio_client.query(App, {}, function(error, result) {
                    var app;
                    if (error) {
                        div = document.getElementById('result2');
                        return div.innerHTML += 'Get Apps Error' + error + '<br>';
                    } else {
                        if (result instanceof Array) {
                            app = new App(result[0]);
                        } else if (result.Data instanceof Array) {
                            app = new App(result.Data[0]);
                        } else if ((result.Data != null)) {
                            app = new App(result.Data);
                        } else {
                            app = new App(result);
                        }
                        div = document.getElementById('result2');
                        div.innerHTML += 'Query /App<br>';
                        return div.innerHTML += JSON.stringify(result);
                    }
                });
                app = new App().mock();
                mojio_client.post(app, function(error, result) {
                    if ((error != null)) {
                        div = document.getElementById('result3');
                        div.innerHTML += 'Post /App Error<br>';
                        return div.innerHTML += "Error:" + error + " Posting a new app:" + app.stringify();
                    } else {
                        div = document.getElementById('result4');
                        div.innerHTML += 'Post /App<br>';
                        div.innerHTML += JSON.stringify(result);
                        app = new App(result);
                        console.log("Starting observing!");
                        return mojio_client.observe(app, null, appChangedCallback, function(error, result) {
                            app.Description = "Changed";
                            return mojio_client.put(app, function(error, result) {
                                div = document.getElementById('result5');
                                div.innerHTML += 'Put /App changed app<br>';
                                return div.innerHTML += JSON.stringify(result);
                            });
                        });
                    }
                });
                return setTimeout(function() {
                    app.Description = "Changed 3";
                    mojio_client.put(app, function(error, result) {
                        div = document.getElementById('result7');
                        div.innerHTML += 'Put /App changed app again<br>';
                        return div.innerHTML += JSON.stringify(result);
                    });
                    console.log("done.");
                    div = document.getElementById('result8');
                    return div.innerHTML += 'DONE.<br>';
                }, 5000);
            }
        });
    });

}).call(this);

/*
 //@ sourceMappingURL=login.map
 */
